var m=Object.defineProperty;var c=(s,e,i)=>e in s?m(s,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[e]=i;var t=(s,e,i)=>(c(s,typeof e!="symbol"?e+"":e,i),i);import{B as l,e as a,G as w,M as h,S as o,d as g,c as u,P as v,O as p,W as b,s as f}from"./three.module.da3d5bd6.js";import{O as x}from"./OrbitControls.33791f63.js";import"./stats.min.46d05fb3.js";import{F as z}from"./FXAAShader.6da588bf.js";class R{constructor(){t(this,"ui");t(this,"stats")}begin(){this.stats&&this.stats.begin()}end(){this.stats&&this.stats.end()}}var C=`in vec2 vUv;

out vec4 oColor;

void main(void) {
    oColor = vec4(vUv,.0, 1.);
}`,P=`out vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}`;class S{constructor(){t(this,"scene");t(this,"geom");t(this,"mat");t(this,"mesh");const e=new r;this.scene=e.scene,this.setUp()}setUp(){this.geom=new l(1,1),this.mat=new a({fragmentShader:C,vertexShader:P,glslVersion:w}),this.mesh=new h(this.geom,this.mat),this.scene.add(this.mesh)}update(){this.mesh.rotation.y+=.01}}class M{constructor(){t(this,"scene");t(this,"camera");t(this,"renderer");t(this,"mesh");const e=new r;this.scene=new o,this.camera=e.oCamera,this.renderer=e.renderer;const i=new g(2,2),d=new a({...z});this.mesh=new h(i,d),this.mesh.material.uniforms.resolution.value.x=1/(window.innerWidth*this.renderer.getPixelRatio()),this.mesh.material.uniforms.resolution.value.y=1/(window.innerHeight*this.renderer.getPixelRatio()),this.scene.add(this.mesh)}render(e,i){this.renderer.setRenderTarget(e),this.mesh.material.uniforms.tDiffuse.value=i,this.renderer.render(this.scene,this.camera),this.renderer.setRenderTarget(null)}}class G{constructor(){t(this,"scene");t(this,"camera");t(this,"renderer");t(this,"target");t(this,"sample");t(this,"fxaa");const e=new r;this.scene=e.scene,this.camera=e.camera,this.renderer=e.renderer,this.target=new u(e.size.width*Math.min(2,window.devicePixelRatio),e.size.height*Math.min(2,window.devicePixelRatio)),this.setUp()}setUp(){this.sample=new S,this.fxaa=new M}update(){this.sample.update(),this.renderer.setRenderTarget(this.target),this.renderer.render(this.scene,this.camera),this.fxaa.render(null,this.target.texture)}resize(){}}let n;class r{constructor(e){t(this,"scene");t(this,"camera");t(this,"oCamera");t(this,"renderer");t(this,"world");t(this,"size");t(this,"debug");if(n)return n;!e||(n=this,this.init(e))}init(e){this.debug=new R,this.size={width:window.innerWidth,height:window.innerHeight},this.scene=new o,this.camera=new v(45,this.size.width/this.size.height,.1,100),this.camera.position.set(0,0,3),this.oCamera=new p(-1,1,1,-1,1,10),this.oCamera.position.set(0,0,10),this.oCamera.lookAt(0,0,0),this.renderer=new b({canvas:e}),this.renderer.setSize(this.size.width,this.size.height),this.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),this.renderer.outputEncoding=f,this.world=new G,new x(this.camera,e),this.render()}render(){this.debug.begin(),this.world.update(),this.debug.end(),requestAnimationFrame(()=>this.render())}resize(){}}const U=document.querySelector(".webgl"),W=new r(U);window.addEventListener("resize",()=>{W.resize()});
